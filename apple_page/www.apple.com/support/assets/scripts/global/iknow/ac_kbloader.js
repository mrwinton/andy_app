var ACWS=window.ACWS||{},usedIds="";ACWS.kmData=Class.create({className:"portlet",requestId:0,locale:"",maxRecords:50,minNum:0,maxNum:99,pspType:"",docIds:"",displayOption:!0,docType:"",defaulOptions:{dtype:"kmdata",excerpt:!0,thumbnail:!0},initialize:function(t){this._options=Object.extend(Object.clone(this.defaulOptions),t||{}),this.dtype=this._options.dtype,this.excerpt=this._options.excerpt,this.thumbnail=this._options.thumbnail,this.locale=ACWPod.getKBLocale()},genRequestId:function(){var t=this.genRandomNumber();if(window.usedIds.length>0){for(;window.usedIds.search(t+":")>-1;){t=this.genRandomNumber()}}return this.requestId=t,this.requestId},checkRequestId:function(){window.usedIds="",$$("*[id^='portlet_']").each(function(t){window.usedIds+=t.readAttribute("id").replace("portlet_","")+":"})},genRandomNumber:function(){return Math.floor(Math.random()*(this.maxNum+1))+this.minNum},loadSpinner:function(){1===this.getPspType()?$$("*[id^='portlet_']").each(function(t){t.innerHTML='<img src="https://www.apple.com/support/assets/images/global/loading_2x.gif" width="28" height="28" class="portlet-spinner">'}):$$(".portlet").each(function(t){t.innerHTML='<img src="https://www.apple.com/support/assets/images/global/loading_2x.gif" width="28" height="28" class="portlet-spinner">'})},setPspType:function(t){this.pspType=void 0===t||""===t?1:t},getPspType:function(){return this.pspType},setClassName:function(t){this.className=t},getClassName:function(){return this.className},setDocIds:function(t){this.docIds=t},getDocIds:function(){return this.docIds.toUpperCase()},setDisplayOption:function(t){this.displayOption=t},getDisplayOption:function(){return this.displayOption},setDocType:function(t){this.docType=t},getDocType:function(){return this.docType},setThumbNail:function(t){this.thumbNail=t},getThumbNail:function(){return this.thumbNail}}),ACWS.KbLoader=Class.create({initialize:function(t){this.kmData=new ACWS.kmData,this.kmData.setPspType(t.psptype),this.kmData.setDocIds(t.kb),this.runKbLoader()},runKbLoader:function(){this.kmData.setClassName(1==this.kmData.getPspType()?"square":"portlet"),this.kmData.setDisplayOption(1==this.kmData.getPspType()?!1:!0),this.kmData.checkRequestId(),this.kmData.genRequestId(),this.genContainerElement(),this.kmData.loadSpinner(),this.loadKbs()},genContainerElement:function(){var t=this;$$("script"),$$("script").reverse().each(function(e){if(e.innerHTML.search(t.kmData.docIds)>-1){throw e.insert({after:t.createUlElement(t.kmData.requestId)}),$break}})},createUlElement:function(t){return"<ul id='portlet_"+t+"' class='"+this.kmData.getClassName()+"'></ul>"},loadKbs:function(){KmLoader.showPortletIconsAndExcerpt=this.kmData.getDisplayOption(),new KmLoader({type:this.kmData.dtype,requestId:this.kmData.requestId,documentIds:this.kmData.getDocIds(),locale:this.kmData.locale,maxRecords:this.kmData.maxRecords,excerpt:this.kmData.excerpt})}}),ACWS.VideoLoader=Class.create({initialize:function(t){this.video_options={},this.dtype="",this.callout=!1,t.callout?(this.callout=!0,this.video_options.dtype="kmrecord",this.video_options.thumbnail=!1,this.video_options.excerpt=!1):(this.video_options.dtype="kmdata",this.video_options.thumbnail=!0),this.kmData=new ACWS.kmData(this.video_options),this.kmData.setPspType(t.psptype),this.kmData.setDocIds(t.video),this.runVideoLoader()},runVideoLoader:function(){this.kmData.setDisplayOption(1==this.kmData.getPspType()?!1:!0),this.kmData.checkRequestId(),this.kmData.genRequestId(),this.genContainerElement(),this.kmData.loadSpinner(),this.loadVideos()},genContainerElement:function(){var t=this;$$("script"),$$("script").reverse().each(function(e){if(e.innerHTML.search(t.kmData.docIds)>-1){throw e.insert({after:t.createUlElement(t.kmData.requestId)}),$break}})},createUlElement:function(t){var e="";return 1===this.kmData.getPspType()&&(e="<div class='video_portlet_lt'><ul class='portlet' id='portlet_"+t+"'></ul></div>"),e=this.callout?'<div id="portlet_'+t+'" ></div>':'<ul id="portlet_'+t+'" ></ul>'},loadVideos:function(){KmLoader.showPortletIconsAndExcerpt=this.kmData.getDisplayOption(),new KmLoader({type:this.kmData.dtype,docType:"videos",requestId:this.kmData.requestId,documentIds:this.kmData.getDocIds(),locale:this.kmData.locale,thumbnail:this.kmData.thumbnail,excerpt:this.kmData.excerpt})}}),ACWS.load=function(t){Event.observe(window,"load",function(){t.kb?new ACWS.KbLoader(t):t.video&&new ACWS.VideoLoader(t)})};
